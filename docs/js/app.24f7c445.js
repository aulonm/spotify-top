(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],m=0,f=[];m<s.length;m++)o=s[m],n[o]&&f.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},i=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/spotify-top/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var r=a("2b0e"),n=a("bb71");a("da64");r["a"].use(n["a"],{iconfont:"md"});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VApp",[a("VToolbar",{attrs:{app:""}},[a("VToolbarTitle",{staticClass:"headline text-uppercase"},[a("span",[t._v("SPOTIFY TOP INFORMATION")])]),a("VSpacer"),a("VBtn",{attrs:{flat:""},on:{click:t.tracksLink}},[a("span",{staticClass:"mr-2"},[t._v("\n        Tracks\n      ")])]),a("VBtn",{attrs:{flat:""},on:{click:t.artistsLink}},[a("span",{staticClass:"mr-2"},[t._v("\n        Artists\n      ")])])],1),a("VContent",[a("RouterView")],1)],1)},o=[],s={name:"App",mounted:function(){this.$store.dispatch("GET_TOP_TRACKS",{limit:20,offset:0,timeRange:"medium_term"})},methods:{tracksLink:function(){var t=this;this.$store.dispatch("GET_TOP_TRACKS",{limit:20,offset:0,timeRange:"medium_term"}).then(function(){t.$router.push({path:"/tracks"})})},artistsLink:function(){var t=this;this.$store.dispatch("GET_TOP_ARTISTS",{limit:20,offset:0,timeRange:"medium_term"}).then(function(){t.$router.push({path:"/artists"})})}}},c=s,l=a("2877"),u=a("6544"),m=a.n(u),f=a("7496"),p=a("8336"),d=a("549c"),T=a("9910"),h=a("71d9"),v=a("2a7f"),_=Object(l["a"])(c,i,o,!1,null,null,null);_.options.__file="App.vue";var V=_.exports;m()(_,{VApp:f["a"],VBtn:p["a"],VContent:d["a"],VSpacer:T["a"],VToolbar:h["a"],VToolbarTitle:v["a"]});var g=a("8c4f"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VContainer",{attrs:{fluid:""}},[a("h1",[t._v("Welcome to your top listening tracks and artists on Spotify")]),a("span",[t._v("On the top right corner you can find links to the artists page or tracks page.")])])},k=[],A={name:"Home"},S=A,y=a("a523"),L=Object(l["a"])(S,b,k,!1,null,null,null);L.options.__file="Home.vue";var x=L.exports;m()(L,{VContainer:y["a"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VLayout",{attrs:{row:""}},[a("VFlex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[a("VCard",[a("VToolbar",{attrs:{dark:""}},[a("VToolbarTitle",[t._v("Top artists")])],1),a("FilterSettings",{attrs:{"click-function":t.getArtists,limit:t.limit,offset:t.offset,ranges:t.ranges,"time-range":t.timeRange}}),a("VList",t._l(t.dataTopArtists.items,function(e,r){return a("VListTile",{key:e.id,attrs:{avatar:""}},[a("VListTileAction",[a("span",[t._v(t._s(r+1))])]),a("VListTileContent",[a("VListTileTitle",{domProps:{textContent:t._s(e.name)}})],1),a("VListTileAvatar",[a("img",{attrs:{src:e.images[2].url}})])],1)}),1)],1)],1)],1)},C=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VExpansionPanel",[a("VExpansionPanelContent",{key:1},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      Filter\n    ")]),a("VForm",{ref:"settings"},[a("VCard",[a("VContainer",[a("VLayout",{attrs:{row:"",wrap:""}},[a("VFlex",{attrs:{lg2:"",md2:"",sm2:"",xs2:""}},[a("VTextField",{attrs:{label:"limit:",placeholder:"max 50",type:"tel"},model:{value:t.dataLimit,callback:function(e){t.dataLimit=e},expression:"dataLimit"}})],1),a("VSpacer"),a("VSelect",{attrs:{items:t.ranges,label:"Time range","item-text":"name","item-value":"value",clearable:""},model:{value:t.dataTimeRange,callback:function(e){t.dataTimeRange=e},expression:"dataTimeRange"}}),a("VSpacer"),a("VFlex",{attrs:{lg2:"",md2:"",sm2:"",xs2:""}},[a("VTextField",{attrs:{label:"offset:",offset:"0",type:"tel"},model:{value:t.dataOffset,callback:function(e){t.dataOffset=e},expression:"dataOffset"}})],1)],1),a("VCardActions",[a("VSpacer"),a("VBtn",{on:{click:function(e){t.clickFunction(t.dataLimit,t.dataOffset,t.dataTimeRange)}}},[t._v("\n              Filter\n            ")]),a("VSpacer")],1)],1)],1)],1)],1)],1)},R=[],E=(a("c5f6"),{name:"FilterSettings",props:{clickFunction:{type:Function,required:!0},limit:{type:Number,required:!0},offset:{type:Number,required:!0},ranges:{type:Array,required:!0},timeRange:{type:String,required:!0}},data:function(){return{dataLimit:this.limit,dataOffset:this.offset,dataTimeRange:this.timeRange}}}),F=E,w=a("b0af"),j=a("99d9"),$=a("cd55"),I=a("49e2"),G=a("0e8f"),B=a("4bd4"),K=a("a722"),q=a("b56d"),M=a("2677"),N=Object(l["a"])(F,P,R,!1,null,null,null);N.options.__file="FilterSettings.vue";var z=N.exports;m()(N,{VBtn:p["a"],VCard:w["a"],VCardActions:j["a"],VContainer:y["a"],VExpansionPanel:$["a"],VExpansionPanelContent:I["a"],VFlex:G["a"],VForm:B["a"],VLayout:K["a"],VSelect:q["a"],VSpacer:T["a"],VTextField:M["a"]});var D={name:"Artists",components:{FilterSettings:z},data:function(){return{limit:20,offset:0,timeRange:"medium_term",ranges:[{value:"short_term",name:"4 weeks"},{value:"medium_term",name:"6 months"},{value:"long_term",name:"Years"}],dataTopArtists:this.$store.state.topArtists}},methods:{getArtists:function(t,e,a){var r=this;this.$store.dispatch("GET_TOP_ARTISTS",{limit:t,offset:e,timeRange:a}).then(function(t){r.dataTopArtists=t.topArtists})}}},Y=D,H=(a("d686"),a("8860")),J=a("ba95"),U=a("40fe"),W=a("c954"),Q=a("5d23"),X=Object(l["a"])(Y,O,C,!1,null,"3fb535ae",null);X.options.__file="Artists.vue";var Z=X.exports;m()(X,{VCard:w["a"],VFlex:G["a"],VLayout:K["a"],VList:H["a"],VListTile:J["a"],VListTileAction:U["a"],VListTileAvatar:W["a"],VListTileContent:Q["a"],VListTileTitle:Q["b"],VToolbar:h["a"],VToolbarTitle:v["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("VLayout",{attrs:{row:""}},[a("VFlex",{attrs:{xs12:"",sm8:"","offset-sm2":""}},[a("VCard",[a("VToolbar",{attrs:{dark:""}},[a("VToolbarTitle",[t._v("Top tracks")])],1),a("FilterSettings",{attrs:{"click-function":t.getTrack,limit:t.limit,offset:t.offset,ranges:t.ranges,"time-range":t.timeRange}}),a("VList",t._l(t.dataTopTracks.items,function(e,r){return a("VListTile",{key:e.id,attrs:{avatar:""}},[a("VListTileAction",[a("span",[t._v(t._s(r+1))])]),a("VListTileContent",[a("VListTileTitle",{domProps:{textContent:t._s(t.compileArtistTracks(e))}})],1),a("VListTileAvatar",[a("img",{attrs:{src:e.album.images[2].url}})])],1)}),1)],1)],1)],1)},et=[],at=(a("ac6a"),a("f3e2"),a("7f7f"),{name:"Tracks",components:{FilterSettings:z},data:function(){return{limit:20,offset:0,timeRange:"medium_term",ranges:[{value:"short_term",name:"4 weeks"},{value:"medium_term",name:"6 months"},{value:"long_term",name:"Years"}],dataTopTracks:this.$store.state.topTracks}},methods:{compileArtistTracks:function(t){var e="".concat(t.artists[0].name);return t.artists.length>1&&t.artists.forEach(function(t,a){0!==a&&(e="".concat(e,", ").concat(t.name))}),"".concat(e," - ").concat(t.album.name)},getTrack:function(t,e,a){var r=this;this.$store.dispatch("GET_TOP_TRACKS",{limit:t,offset:e,timeRange:a}).then(function(t){r.dataTopTracks=t.topTracks})}}}),rt=at,nt=Object(l["a"])(rt,tt,et,!1,null,null,null);nt.options.__file="Tracks.vue";var it=nt.exports;m()(nt,{VCard:w["a"],VFlex:G["a"],VLayout:K["a"],VList:H["a"],VListTile:J["a"],VListTileAction:U["a"],VListTileAvatar:W["a"],VListTileContent:Q["a"],VListTileTitle:Q["b"],VToolbar:h["a"],VToolbarTitle:v["a"]}),r["a"].use(g["a"]);var ot=new g["a"]({routes:[{path:"/",name:"home",component:x},{path:"/tracks",name:"tracks",component:it},{path:"/artists",name:"artists",component:Z}]}),st=a("2f62"),ct=(a("28a5"),a("bc3a")),lt=a.n(ct),ut={get apiUrl(){return"https://aulonm.github.io/spotify-top/"}},mt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="864189e74c304594a7116130f8627506",a="https://accounts.spotify.com/authorize",r=ut.apiUrl,n=["user-top-read"];!0===t&&(window.location="".concat(a,"?client_id=").concat(e,"&scope=").concat(n.join("%20"),"&response_type=token&redirect_uri=").concat(r)),window.location.hash.substring(2).split("&").forEach(function(t){if(t){var e=t.split("=");localStorage.setItem(e[0],e[1])}}),window.location.hash="",localStorage.access_token?ot.push({name:"home"}):window.location="".concat(a,"?client_id=").concat(e,"&scope=").concat(n.join("%20"),"&response_type=token&redirect_uri=").concat(r)},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"medium_term",r="https://api.spotify.com/v1/me/top/tracks?limit=".concat(t,"&offset=").concat(e,"&time_range=").concat(a);return lt()({method:"get",url:r,headers:{Authorization:"Bearer ".concat(localStorage.access_token)}}).then(function(t){return Promise.resolve(t.data)}).catch(function(t){return 401===t.response.data.error.status&&mt(!0),Promise.reject(t.response.data.error)})},pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"medium_term",r="https://api.spotify.com/v1/me/top/artists?limit=".concat(t,"&offset=").concat(e,"&time_range=").concat(a);return lt()({method:"get",url:r,headers:{Authorization:"Bearer ".concat(localStorage.access_token)}}).then(function(t){return Promise.resolve(t.data)}).catch(function(t){return 401===t.response.data.error.status&&mt(!0),Promise.reject(t.response.data.error)})};r["a"].use(st["a"]);var dt=!1,Tt=new st["a"].Store({state:{topTracks:{},topArtists:{},error:{}},debug:dt,mutations:{SET_TOP_TRACKS:function(t,e){var a=e.tracks,r=t;r.topTracks=a},SET_TOP_ARTISTS:function(t,e){var a=e.artists,r=t;r.topArtists=a},GET_FAILED:function(t,e){var a=e.error,r=t;r.error=a}},actions:{GET_TOP_TRACKS:function(t,e){var a=this,r=t.commit,n=e.limit,i=e.offset,o=e.timeRange;return ft(n,i,o).then(function(t){return r("SET_TOP_TRACKS",{tracks:t}),Promise.resolve({topTracks:a.state.topTracks})}).catch(function(t){r("GET_FAILED",{error:t})})},GET_TOP_ARTISTS:function(t,e){var a=this,r=t.commit,n=e.limit,i=e.offset,o=e.timeRange;return pt(n,i,o).then(function(t){return r("SET_TOP_ARTISTS",{artists:t}),Promise.resolve({topArtists:a.state.topArtists})}).catch(function(t){r("GET_FAILED",{error:t})})}}});r["a"].config.productionTip=!1,new r["a"]({router:ot,store:Tt,render:function(t){return t(V)}}).$mount("#app")},"90b3":function(t,e,a){},d686:function(t,e,a){"use strict";var r=a("90b3"),n=a.n(r);n.a}});
//# sourceMappingURL=app.24f7c445.js.map